@model IEnumerable<QLNS.Models.CongTacModel>
@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="~/Content/css/style_layout.css" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>

    <style>
        .table-section {
            display: flex;
            gap: 20px;
        }

        .table {
            flex: 1;
            max-height: 500px;
            overflow-y: auto;
        }

            .table h3 {
                font-size: 18px;
                margin-bottom: 10px;
                color: #333;
            }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
        }

            table th, table td {
                padding: 10px;
                border: 1px solid #ddd;
                text-align: left;
            }

            table th {
                background-color: #f7f7f7;
                font-weight: bold;
                color: #333;
            }

        .breadcrumb {
            font-size: 18px;
            color: #333;
            margin: 20px 0;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Phân bổ công tác
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel" style="font-weight:bold">Phân bổ công tác</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="@Url.Action("ThemCongTac", "CongTac")" method="post">
                    <div class="mb-3">
                        <label for="MaNV" class="form-label">Mã Nhân Viên</label>
                        <input type="number" class="form-control" id="MaNV" name="MaNV" required>
                    </div>
                    <div class="mb-3">
                        <label for="NgayBatDau" class="form-label">Ngày Bắt Đầu</label>
                        <input type="date" class="form-control" id="NgayBatDau" name="NgayBatDau" required>
                    </div>
                    <div class="mb-3">
                        <label for="NgayKetThuc" class="form-label">Ngày Kết Thúc</label>
                        <input type="date" class="form-control" id="NgayKetThuc" name="NgayKetThuc" required>
                    </div>
                    <div class="mb-3">
                        <label for="DiaDiem" class="form-label">Địa Điểm</label>
                        <input type="text" class="form-control" id="DiaDiem" name="DiaDiem" required>
                    </div>
                    <div class="mb-3">
                        <label for="MucDich" class="form-label">Mục Đích</label>
                        <input type="text" class="form-control" id="MucDich" name="MucDich" required>
                    </div>
                    <div class="mb-3">
                        <label for="BieuMau" class="form-label">Biểu Mẫu</label>
                        <input type="text" class="form-control" id="BieuMau" name="BieuMau" required>
                    </div>
                    <div class="mb-3">
                        <label for="TrangThai" class="form-label">Trạng Thái</label>
                        <input type="text" class="form-control" id="TrangThai" name="TrangThai" required>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Lưu</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



<div class="table-section">
    <div class="table">
        <h3>Danh sách công tác</h3>
        <table>
            <thead>
                <tr>
                    <th>STT</th>
                    <th>Mã Công Tác</th>
                    <th>Tên Nhân Viên</th>
                    <th>Ngày Bắt Đầu</th>
                    <th>Ngày Kết Thúc</th>
                    <th>Địa Điểm Công Tác</th>
                    <th>Mục Đích Công Tác</th>
                    <th>Biểu Mẫu</th>
                    <th>Trạng Thái</th>
                    <th colspan="2" style="text-align:center">Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Select((value, index) => new { value, index }))
                {
                    <tr>
                        <td>@(item.index + 1)</td>  <!-- Số thứ tự tự động tăng -->
                        <td>@item.value.MaCT</td>
                        <td>@item.value.HoTen</td>
                        <td>@item.value.NgayBatDau.ToString("dd/MM/yyyy")</td>
                        <td>@item.value.NgayKetThuc.ToString("dd/MM/yyyy")</td>
                        <td>@item.value.DiaDiem</td>
                        <td>@item.value.MucDich</td>
                        <td>@item.value.BieuMau</td>
                        <td>
                            @if (item.value.TrangThai == "Đã hoàn thành")
                            {
                                <i class="fa-solid fa-circle-check" style="color: #63E6BE;"></i> @item.value.TrangThai
                            }
                            else
                            {
                                <i class="fa-solid fa-circle-xmark" style="color: #da0746;"></i> @item.value.TrangThai
                            }
                        </td>
                        <td>
                            <button class="btn btn-warning">Sửa</button>
                        </td>
                        <td>
                            <button class="btn btn-danger">Xóa</button>
                        </td>

                    </tr>
                }
            </tbody>
        </table>




    </div>
</div>


@*<nav aria-label="Page navigation example" class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item"><a class="page-link" href="#">Previous</a></li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">Next</a></li>
        </ul>
    </nav>*@


<nav aria-label="Page navigation example" class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item">
                <a class="page-link" href="@Url.Action("DanhSachCongTac", "CongTac", new { page = ViewBag.PageNumber - 1 })" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            @for (int i = 1; i <= ViewBag.TotalPages; i++)
            {
    <li class="page-item @(i == ViewBag.PageNumber ? "active" : "")">
        <a class="page-link" href="@Url.Action("DanhSachCongTac", "CongTac", new { page = i })">@i</a>
    </li>}
            <li class="page-item">
                <a class="page-link" href="@Url.Action("DanhSachCongTac", "CongTac", new { page = ViewBag.PageNumber + 1 })" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>

@*<nav aria-label="Page navigation example" class="mt-4">
    <ul class="pagination justify-content-center">
        <li class="page-item @(ViewBag.PageNumber == 1 ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("DanhSachCongTac", "CongTac", new { page = ViewBag.PageNumber - 1 })" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>

        @for (int i = 1; i <= ViewBag.TotalPages; i++)
        {
            <li class="page-item @(i == ViewBag.PageNumber ? "active" : "")">
                <a class="page-link" href="@Url.Action("DanhSachCongTac", "CongTac", new { page = i })">@i</a>
            </li>
        }

        <li class="page-item @(ViewBag.PageNumber == ViewBag.TotalPages ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("DanhSachCongTac", "CongTac", new { page = ViewBag.PageNumber + 1 })" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
</nav>*@









